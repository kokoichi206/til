## sec 1

- **Web サービスは速ければ速いほどいい**
- Core Web Vitals
  - LCP
    - 2.5s でイエローカード
  - FID
  - CLS
- キャパシティ
  - 処理可能なスループットや同時接続数
  - 利用可能なリソース量
- クラウド時代
  - システムリソースの用意が柔軟（Elastic）に即時・随時可能（OnDemand）
- キャパシティの見積り方
  - 負荷試験
  - → パフォーマンスチューニング
- **きほんのき**
  - 推測せず計測する
  - 公平に比較する
    - apple to apple で比較
    - 意図的に変更したところ以外、同じ2つのデータを比較する
  - １つずつ比較する
  - **制約理論**
    - 全体のスループットはボトルネックのスループットに律速する
- **きほんのほ**
  - **速い Web サービスを作るのと、Web サービスを速くするのは根本的に違うアプローチ**
  - ボトルネックにだけアプローチする
  - ボトルネックの特定は外側から順番に
    - マクロ視点で全体を俯瞰
  - ボトルネック対処の３パターン
    - 解決、回避、緩和
- **きほんのん**
  - 負荷試験
    - 目的
    - シナリオ
    - 試行負荷
    - 試行回数
    - 試行時間
    - 実施期間

## sec 2

- モニタリング
  - **モニタリングは継続的なテストである**とも呼ばれている
    - 提供しているサービスが想定している形に動作しているかの確認という性質から
  - 『高速であること』を保証する
  - メトリクス
    - その時の状態を定量的に示した値
- モニタリング種類
  - 外形監視
    - ユーザーと同じ経路でアクセス
    - Synthetic Monitoring
    - SaaS:
      - https://ja.mackerel.io/
    - シナリオテスト
  - 内部監視
    - エージェント

``` sh
top -cd1
free --human

vmstat
sar
```

- モニタリングツール
  - Pull 型と Push 型
    - どちらのアーキテクチャでもエージェントが動作している
  - Prometheus はプル型
    - モニタリングアプリケーションがエージェントへメトリクスを要求・取得する
    - Pull 型の欠点を補う Service Discovery etc...
  - ツールよりも**何を対象にモニタリング**をするか
- https://www.nagios.org/
- **OpenMetrics**
  - Evolving the Prometheus exposition format into a standard.
    - https://www.cncf.io/projects/openmetrics/
  - **Prometheus が利用していたフォーマットを標準化したもの**
  - **エージェントの実装が非常に楽になり、さまざまなミドルウェア向けの exporter 開発が進んだ！**
- ベンチマーク
  - プロファイラ
    - ラインプロファイラ
