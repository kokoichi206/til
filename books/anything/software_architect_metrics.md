## sec 1

- パラダイムはシステムを生み出す源泉
- 4つのキーメトリクス
  - Lean と DevOps の科学の根底、ソフトウェアデリバリーに対するメンタルモデルから生まれた
    - 一連の活動からなるパイプライン（フロー）
    - **コードをバージョン管理にプッシュしてから、ユーザーに提供されるまで！**
  - **デプロイ頻度**
    - 時間の経過とともにパイプラインを経由してくる個々の変更の数
  - **変更のリードタイム**
    - コードや設定の変更が、パイプラインを通って**端に到達するまでにかかる時間**
  - デプロイ頻度と変更のリードタイムの2つは、**開発のスループットを計測**している
  - **変更時の障害率**
    - パイプの**終端から出てきた変更のうち**、動作中のサービスで障害を引き起こすものの割合
  - **サービス復旧時間**
    - 障害が発生してから、サービスが復旧されるまでにかかる時間
  - 変更時の障害率とサービス復旧時間の2つは、**サービスの安定性**している
- 計測する4つ
  - コミットタイムスタンプ
    - ちょいむず
    - メインブランチへのマージするタイミングを代替トリガーとする人もいる
    - 寿命の長いブランチは注意
  - デプロイタイムスタンプ
    - 本番環境への最終的なデプロイをするパイプラインが完了したタイミング！
  - 本番環境の障害が起きた日時
    - 結構主観的になっちゃいがち
    - 自分の納得できる定義でよい
  - 障害が完了した日時
    - サービスが復旧したときが完了
      - **ロールバックしてサービスが完了したのであればチケットは完了とする**
- 本番環境？
  - 継続的デプロイメントへの移行に挑戦したか？
  - 最上位の環境
    - 重要なのは、変更を受け入れた時点で、**その変更を本番（プレ本番）環境に移行するための最終ステップに必要な作業がなくなった！と捉えている環境**
  - 最上位の環境を本番環境と同等に扱い、メトリクスを使うことも可能
- 記録・算出
  - デプロイ頻度
    - 所定の期間内に成功したデプロイの総数が必要
  - 変更のリードタイム
  - 変更時の障害率
    - あるきかん
      - 36件のデプロイ、2件の障害解決 → 2/36
    - **復旧済みの障害だけを対象とする**
  - サービス復旧時間
    - 平均値、中央値どちらも可能性としてはある
- オーナーシップと改善

## sec 2

- 適応度関数
  - 見込みのある設計ソリューションが、設定した目的の達成にどれだけ近いかを要約するために使用する目的関数
- アーキテクチャテスト・アーキテクチャ検証
- テストピラミッド
  - 最下層
    - ユニットテスト
    - 失敗の要因が明らか
    - **現実世界のユースケースの問題が、エンドユーザーにどう現れるかは自明ではない**
  - 結合テスト
    - コンポーネントテスト、API テストなど
  - 最上位
    - E2E テスト
    - エラーの要因となるコンポーネントを突き止めるのが難しいかもしれない
    - 保守・実行コストが高い

## 疑問

- 4 keys とかのメトリクス、使えるスコープってどこなんだろ
  - 特に toB 向けのサービスとかでは、自由に本番環境にデプロイできないタイミングもあるだろうし
  - モバイルなどの審査が必要なものに関しては、こちらの都合ではどうしようもない時も

## Links

- [4 keys?](https://cloud.google.com/blog/products/devops-sre/using-the-four-keys-to-measure-your-devops-performance?hl=en)
