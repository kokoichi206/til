## sec 1

- パラダイムはシステムを生み出す源泉
- 4つのキーメトリクス
  - Lean と DevOps の科学の根底、ソフトウェアデリバリーに対するメンタルモデルから生まれた
    - 一連の活動からなるパイプライン（フロー）
    - **コードをバージョン管理にプッシュしてから、ユーザーに提供されるまで！**
  - **デプロイ頻度**
    - 時間の経過とともにパイプラインを経由してくる個々の変更の数
  - **変更のリードタイム**
    - コードや設定の変更が、パイプラインを通って**端に到達するまでにかかる時間**
  - デプロイ頻度と変更のリードタイムの2つは、**開発のスループットを計測**している
  - **変更時の障害率**
    - パイプの**終端から出てきた変更のうち**、動作中のサービスで障害を引き起こすものの割合
  - **サービス復旧時間**
    - 障害が発生してから、サービスが復旧されるまでにかかる時間
  - 変更時の障害率とサービス復旧時間の2つは、**サービスの安定性**している
- 計測する4つ
  - コミットタイムスタンプ
    - ちょいむず
    - メインブランチへのマージするタイミングを代替トリガーとする人もいる
    - 寿命の長いブランチは注意
  - デプロイタイムスタンプ
    - 本番環境への最終的なデプロイをするパイプラインが完了したタイミング！
  - 本番環境の障害が起きた日時
    - 結構主観的になっちゃいがち
    - 自分の納得できる定義でよい
  - 障害が完了した日時
    - サービスが復旧したときが完了
      - **ロールバックしてサービスが完了したのであればチケットは完了とする**
- 本番環境？
  - 継続的デプロイメントへの移行に挑戦したか？
  - 最上位の環境
    - 重要なのは、変更を受け入れた時点で、**その変更を本番（プレ本番）環境に移行するための最終ステップに必要な作業がなくなった！と捉えている環境**
  - 最上位の環境を本番環境と同等に扱い、メトリクスを使うことも可能
- 記録・算出
  - デプロイ頻度
    - 所定の期間内に成功したデプロイの総数が必要
  - 変更のリードタイム
  - 変更時の障害率
    - あるきかん
      - 36件のデプロイ、2件の障害解決 → 2/36
    - **復旧済みの障害だけを対象とする**
  - サービス復旧時間
    - 平均値、中央値どちらも可能性としてはある
- オーナーシップと改善

## sec 2

- 適応度関数
  - 見込みのある設計ソリューションが、設定した目的の達成にどれだけ近いかを要約するために使用する目的関数
- アーキテクチャテスト・アーキテクチャ検証
- テストピラミッド
  - 最下層
    - ユニットテスト
    - 失敗の要因が明らか
    - **現実世界のユースケースの問題が、エンドユーザーにどう現れるかは自明ではない**
  - 結合テスト
    - コンポーネントテスト、API テストなど
  - 最上位
    - E2E テスト
    - エラーの要因となるコンポーネントを突き止めるのが難しいかもしれない
    - 保守・実行コストが高い

## sec 3

- ソフトウェアアーキテクチャ
  - 大切
  - 儚い。。
  - **防御的なアプローチ！**
- ソフトウェア開発
  - **学習と発見の実習！**
  - 前進的な進歩と学習的なプロセスの結果
- 持続可能な変化を実現するためのツール
  - モジュール性
    - 独立して変更できる要素に分割
  - 凝集性
    - 同時に変更するコードをまとめておく
  - 関心ごとの分離
    - 1つの問題を解決する要素単位に、コード・システムを分割
  - 抽象化・情報隠蔽
    - 実装の詳細を隠す → テスト容易性
  - 結合度
- テストしてる？
  - ソフトウェアが機能してるかの判断
  - **テスト容易性のための設計**
    - **変更容易なコードを書くための特性と同じ！**
    - 設計の質の向上につながる
- デプロイ可能性
  - 継続的デリバリー
    - ソフトウェアが常にリリース可能な状態であることを保証するために最善を尽くす
      - **デプロイメントパイプライン**により決定される

## sec 4

- モジュール性成熟度指数: Modularity Maturity Index: MMI
- 技術的負債
  - 保守や改修の中で、必然的に発生する
  - 絶え間ない学習プロセスであり、ソリューションが最初から正解であることは稀
    - **アーキテクチャの修正は定期的の行わなければならない！**
    - **アーキテクチャ侵食**を防ぐ！
- 技術的負債のジレンマから抜けだせ！
  - リファクタリング
  - リプレース
- MMI: Modularity Maturity Index
  - 技術的負債を比較するための、統一的な評価スキーム
  - **人間の脳が複雑さに対抗するために獲得した機能**
    - チャンキング
    - 階層構造
    - スキーマ構造
- モジュール性
  - 高凝集疎結合
  - 名前
    - 名前が曖昧な場合、モジュールの役割が不明瞭なのかもしれない
  - 釣り合いの取れた比率
- 階層性
  - 使用関係, 継承関係
    - 階層構造を作らない方法で使用可能
    - **絡み合った構造を作る原因にもなる**
      - パッケージ参照の向きに制限をかけたりする
- パターン一貫性
  - スキーマの使用 → **複雑な構造を素早く理解可能にする！**
    - ソフトウェア開発にパターンが取り入れられた理由
- MMI
  - モジュール性 45% の割合を占めるほど重要
  - んー
  - 実アーキテクチャは気づかないうちに目標アーキテクチャから逸脱していく！
    - **開発チーム内でのアーキテクチャに対する知識の欠如もその一員**
    - チームの時間的なプレッシャーなど

## sec 5

- ソフトウェアアーキテクト
  - NOT 技芸 BUT 科学
    - 物事を計測し、さらなる推論の根拠とする
- DevOps
  - 文化的な移行を表す用語
  - 開発者と運用者の断絶を取り除く
  - 開発環境と本番環境の『環境の不一致』などが起きないようにする
  - **オーナーシップシフト**

## 疑問

- 4 keys とかのメトリクス、使えるスコープってどこなんだろ
  - 特に toB 向けのサービスとかでは、自由に本番環境にデプロイできないタイミングもあるだろうし
  - モバイルなどの審査が必要なものに関しては、こちらの都合ではどうしようもない時も
- よくリプレイスした！とか聞くけど、どこまで負債が貯まったりしたらリプレイス判断をするのか
  - アーキテクチャの修正は定期的の行わなければならない！

## Links

- [4 keys?](https://cloud.google.com/blog/products/devops-sre/using-the-four-keys-to-measure-your-devops-performance?hl=en)
