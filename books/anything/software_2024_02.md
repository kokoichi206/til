## なんでも

- domain
  - 1985 に爆誕
    - symbolics.com
  - ドロップキャッチなどのサービス
  - ICANN
    - IANA
      - ドメイン・IP アドレスの管理調整を担う
  - TLD
  - SLD
    - second level domain
  - ccTLD
    - country code TLD
    - `co.jp`
      - １組織１ドメイン
      - 企業として存在してることが条件
    - `go.jp`
      - 政府関連の組織だけが取得可能
      - 電話による認証が必要
  - レジストリ、レジストラ、リセラー
  - rules
    - max 253 words
  - Punycode
    - マルチバイト文字をドメインとして登録する方法
      - ASCII 文字をドメインに登録
- リスペクトの気持ちを持つ
  - **技術が多様になった現代**では、誰に対してもこの気持ちを持つことが大事
    - 誰からも吸収しようという真摯な姿勢につながる
- Chrome
  - Web 標準を追いつつ Chromium にコントリビュート。。。？
  - マルチプロセスアーキテクチャ
    - コンポーネント・タブごとにプロセスを割り当て、ブラウザ全体がクラッシュしないようにしている
  - ブラウザプロセス
    - 全体の管理
  - レンダラープロセス（レンダラー）
    - Web コンテンツを処理するためのプロセス
  - プロセス間通信: IPC
  - セキュリティ上の利点
  - マルチプロセスであることでメモリは増えるが、近年の PC 的にデメリットよりメリットの方が大きい
  - HTML5
    - それまで Adobe Flash のような拡張に頼ってた機能を Web の機能として取り入れようという動き
- 開発者体験改善クエスト
  - まずは計測から
  - Four Keys
    - **業績面でのパフォーマンスとの相関もある！**
      - **Four Keys の指標がよくなると業績も良くなる！！**
  - NOT ONLY Four keys
    - [The SPACE of Developer Productivity](https://queue.acm.org/detail.cfm?id=3454124)
      - 開発者の満足度
      - ドキュメントの発見しやすさ
- テーブル設計 **〜UI の重力〜**
  - UI は情報設計の結果であるため UI をもとにテーブル設計するのは悪いことではない
    - **UI の『情報』と『事実』を分解することなく決めるのが良くない**
  - Easy and Simple
  - **『情報』と『事実』**
    - 生年月日は事実
    - **年齢は加工して得られた情報**
  - **価値を提供する方法はリリースすること**
  - その他のコツ
    - **イミュータブルデータモデル**に設計する
      - **UPDATE を行わないもの**
      - https://scrapbox.io/kawasima/%E3%82%A4%E3%83%9F%E3%83%A5%E3%83%BC%E3%82%BF%E3%83%96%E3%83%AB%E3%83%87%E3%83%BC%E3%82%BF%E3%83%A2%E3%83%87%E3%83%AB
    - **ライフサイクルによってエンティティを分割する**
      - 場合によっては null になるようなカラム・UPDATE が必要なレコードはライフサイクルが違う可能性がある！
      - アジャイル開発とデータベース設計
    - **1つのテーブルに4つ以上のインデックスを作らない**
      - **インデックスショットガン**
  - 適切に正規化してればなんとかなる問題なのか？
  - テーブルを分けることのデメリット
    - アクティブレコードパターンとの相性が悪い
      - Rails 的な
    - 適切なテーブルの粒度を見極めるのが難
- Cloudflare Pages
  - Cloudflare Workers 同様スケーラブル
  - Workers KV
    - 結果整合であり強整合ではない
    - 強整合が必要な場合は Durable Objects を使う
  - Pages Functions
- 

## テスト設計

### テストとは

- 対象
  - 要件、ユーザーストーリー、設計、なども評価対象になる
    - 総合的なテストが下がるはずよ！
- テストに対する**誤解**
  - テストはテスト実行だけである
    - テストに対する設計なども存在する
  - テストはテスト対象の検証だけに重点を置く
    - ニーズを満たしてるかどうかなどの、妥当性確認も行う必要がある
- テストプロセス
  - 分析
  - 設計
  - 実装
  - 実行
- 動的テスト
  - プロダクトを動かして確認するもの
- 静的テスト
  - レビューのようなもの
  - 何をテストすべきか、といった**テスト分析**も
    - 要件定義の段階でも分析を始められるよう、ある程度の抽象度で止めておく
    - **シフトレフトテスト**
    - **テストコードにもテスト分析で考えた内容を盛り込む**
- 近年の傾向
  - テストマニフェスト
  - 継続的テストモデル
    - **テストをフェーズとして捉えず、アクティビティとして**考える方法

### テスト技法

- 技法の種類
  - ブラックボックス
  - ホワイトボックス
  - 経験ベース

### 探索的テスト

- 探索的テスト
  - Exploratory Testing Explained
    - 学習、テスト設計、テスト実行を同時に行うことである！
  - Explore it
    - **直前の実験から得た気づきを次の実験に活かす**
    - **システムについて学習しながら同時にテストを設計・実行する**
  - 網羅的テスト**ではない**
    - 網羅性に関しては記述式テストに任せる
- **探索的テストの必要な事前知識**
  - プロダクトやテストについてさまざまな知識が必要
  - **基本的なテスト技法は自在に使えるようにする！**
  - 参考になるソフトウェアの仕様を把握しておく
    - どうソフトウェア内の別機能での動作、ルール、ポリシー
    - 部署・会社としてのルール、ポリシー
    - デファクトとなってるソフトウェアの動作、ルール、ポリシー
- 進め方
  - 1 事前準備
    - 情報の共有
      - どのようなことを解決する機能追加か
      - 開発者として不安なところはあるか
      - ソフトウェアを使った時に、起きて欲しくないことは何か
      - 記述式テストは実施済みか
    - チャーター作成
      - どこをテストするべきかの道標
    - 必要な設定や条件の準備
  - 2 探索的テスト実施
    - 実施中
      - 最初は正常なケースを実施
        - 次に準正常系
        - 最後に異常系
    - 怪しそうな箇所を見つけたら
      - さらに掘り下げる
      - どうソフトウェア内の同じようなロジックを使ってる箇所がないか考える
  - 3 まとめと共有
- 事前に過去にあった同種のバグを共有するなど

### シフトレフトテストの実現に向けて

- Shift Left Testing
  - 動的なテストのタイミングを前倒しするアプローチ
  - Ci/CD のデプロイメントパイプラインの適応領域を広げる

## web api

- 2017: 世界で最も価値のある資源はもはや石油ではなくデータである
- セキュリティ面でのシフトレフトを進める
  - 開発チーム内のセキュリティリーダーを『セキュリティチャンピオン』として任命するなど
- さらに、企画段階のセキュリティなども
  - コンプライアンス上の問題
    - クレカを使う上での法令
  - サービスレベルの脅威分析
- 脆弱性対策の方針検討
  - アプリケーションフレームワークをフル活用する
  - XSS
    - JSON を使う限りにおいて、基本は大丈夫
    - ただし Content-Type は正しくしようね
  - CSRF
    - Cookie を用いてセッション管理してる時は注意
- **診断の方法**の決定
  - **SAST**: Static Application Security Testing
    - ソースコードの解析による自動診断
  - **DAST**: Dynamic Application Security Testing
    - 攻撃者の立場でインターネット越しに擬似攻撃
    - ZAP, Burp Suite,.. など
  - **SCA**: Software Composition Analysis
    - アプリケーションが依存するライブラリ・フレームワークを分析して脆弱性を把握
    - Synk, npm audit, Github Dependabot など
  - **コンテナイメージスキャン**
    - Trivy, Synk など
- やられアプリ
  - OWASP Juice Shop
  - WebGoat
  - DVWS
    - https://github.com/snoopysecurity/dvws-node
    - **Solution wiki!!!**
      - https://github.com/snoopysecurity/dvws-node/wiki

```
sample<img src=x onerror=alert(1)>

http://localhost:2080/api/v2/passphrase/'%20OR%20'1'%20=%20'1

# NoSQL でも injection は起きる時は起きるよ.
kokoichi' || 'a' == 'a
```

- 認証・認可
  - 認証: Authentication
    - 本人性の検証
    - いずれか
      - 知識
      - 所有
      - 生態
  - 認可: Authorization
    - あるリソースへの特定の処理を許可する
    - 電車の切符
    - 家の鍵
- OAuth2.0
  - 認可を扱うフレームワーク
    - RFC6749
  - アクター
    - リソースオーナー
    - リソースサーバー
    - クライアント
    - 認可サーバー
- OpenID Connect 1.0
  - OAuth 2.0 をベースに安全に ID 連携する仕様を定めたもの
  - アクター
    - エンドユーザー
    - UserInfo エンドポイント
    - OpenID プロバイダ
      - リライングパーティーに ID トークンを発行
      - **エンコードの方法や含める情報が標準化**されている
    - リライングパーティー
- Keyclock
  - https://www.keycloak.org/

## TODO?

- 頻繁なリグレッションテストに向けて
  - 自動化？
  - デグレを防ぐ方法 
- Security as code
- SSCP とか、セキュリティの基礎として気になる
  - https://engineering.mercari.com/blog/entry/2020-05-14-121008/

## Links

- ICANN
  - https://www.icann.org/resources/pages/what-2012-02-25-ja
- Testing manifesto
  - https://www.growingagile.co/the-testing-manifesto/
- メルカリとシフトレフトセキュリティ
  - https://engineering.mercari.com/blog/entry/20201214-bea4717e9a/
