## なんでも

- 1 日 11 時間以上座る人は、4 時間未満しか座らない人と比べて死亡リスクが 40% 高くなる！？
- 30 分おきに立ち上がって 2 分間のウォーキングをすると血流は改善する
- 技術力: 国、社会、人などを形容する言葉で、この力がゆえに他との優劣がつけられるもの。
- AI を「作る」より「育て続ける」ことの方が遥かに難しい
  - AI に栄養を与え続けることの重要性
- AI は、人間が作ったシステムに潜む、まだ気づかれていないバイアスを明らかにし、改善を図ることを可能にする

## SQL

Structured Query Language

社員番号とかは id として主キーにふさわしいかと思いきや、将来規格が変わったりすると、全カラムの変更が必要となる。その際、他テーブルから参照されることが多いため、主キーに変更が入りうる設計は良くなさそうで。  
MySQL とかの AUTO_INCREMENT などで自動採番にする。

```sql
CREATE TABLE tblname (
    col1 int CHECK (col1 >= 10 AND col1 <= 20),
    col2 int CHECK (col2 > col1)
;)
```

`SELECT` の値は指定しない限りは、基本的に不定。

`FROM` を指定しないと、テーブルに関係なく評価した結果を返す。

```sql
SELECT 1+2*3;
```

MySQL では、0 とから文字列も偽になる。  
PostgreSQL では、0, off, no, n, false, f も偽になる。

演算子や関数は RDBMS によってかなり異なる！

`NULL` に**対する演算や比較は、全て `NULL` になる**  
`NULL = NULL` も `NULL` になる！

### 実務で使える SQL

Active Record で LIKE 句はサポートされていない。。。？

何でプレースホルダーによる展開だと、無事エスケープされるというか、文字列で純粋に検索になるんだ？

ORM で実装できない箇所もあり、その周りでセキュリティリスクが発生する！

### スロークエリ

問題となっているプロセスとクエリを特定したい！

```sql
SHOW PROCESSLIST;
KILL <ID>;
```

MySQL にはスロークエリログという、実行速度の遅いクエリを記録する機能がある！  
**多くの場合で有効にしておくことが推奨されている**。

動的に設定できるシステム変数で、サーバーの再起動なしで反映可能。

```sql
SHOW VARIABLES LIKE 'slow%';
```

**PostgreSQL での話**

TODO

```sql
=> \x
Expanded display is on.
```

タイムアウト値を設定する。

### タイムゾーン

```sql
=> SELECT CURRENT_TIMESTAMP;
       current_timestamp
-------------------------------
 2022-11-21 16:12:16.576376+00
(1 row)
```

どうやって変えるか

- サーバーのタイムゾーンを変更する
- 環境変数 TZ を指定する
- my.cnf やサーバー起動時のコマンドのオプションで指定する
- システム設定を変更する

### チューニング

posgre での見え方

```sql
=> EXPLAIN SELECT * FROM members WHERE group_id = 1;
                       QUERY PLAN
---------------------------------------------------------
 Seq Scan on members  (cost=0.00..2.17 rows=45 width=38)
   Filter: (group_id = 1)
(2 rows)
```

MySQL では `type` と `Extra` を参照することが多い。

JOIN してからソートされるなどがあると、クエリが遅くなる。なんで。  
解決策としては、無理に 1 つのクエリにするのではなく、複数回クエリを発行した方が早くなるケースがある！

### 分析 SQL

ユーザーの画面閲覧履歴など

- どこでユーザーが離脱したか
- コンバージョンポイントへの到達率が高く、売り上げにより寄与する遷移はどこか

## Cython

Python では「リストは動的配列」であり、配列要素へのアクセスは配列とほぼ同じ時間で処理が可能。

OpenMP を使って、マルチスレッドで動かす。Python では GIL(Global Interpreter Lock) がかかっているため、そのままではマルチスレッドで動かない。

### Raspberrry Pi

スパコンの並列計算を差させるのが MPI(Message Passing Interface) であり、プログラムとは独立した**CPU 間通信プロトコル**。

MPI の実装にはいくつかあり、MPICH と OpenMPI が普及している。
